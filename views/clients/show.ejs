<%- include('../partials/html-head') %>
  <%- include('../partials/nav') %>

    <main>
      <div class="profile-header">
        <div class="avatar-div">
          <img src="https://i.imgur.com/XO3pzJV.png" alt="avatar" class="client-avatar">
        </div>
        <div class="name-div">
          <h1><%= customer.name %></h1>
          <h6><%= customer.occupation %></h6>
          <div class="info-div">
            <p>
              <i class="fa-solid fa-phone"></i>
              <%= customer.phone %>
            </p>
            <p>
              <i class="fa-solid fa-envelope-open-text"></i>
              <%= customer.email %>
            </p>
            <p>
              <i class="fa-solid fa-map-location"></i>
              <%= customer.address %>
            </p>
          </div>
        </div>
        <a href="/clients/<%= customer._id %>/edit">
          <button class="btn btn-success edit-button">
            <i class="fa-solid fa-pen"></i>
          </button>
        </a>
      </div>

      <!------------- ☎️ conversations ☎️ ------------------->
      <!-- add a new conversation  -->
      <h3>Conversations:</h3>
      <form action="/clients/<%= customer._id %>/conversations" method="POST">
        <label for="date">Date: </label>
        <input type="datetime-local" name="date" required>
        <label for="info">Notes:</label>
        <input type="text" name="info" required>
        <button class="btn btn-success" type="submit">Submit</button>
      </form>

      <!-- see conversations  -->
      <% if (customer.conversations.length) { %>
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <% customer.conversations.forEach(function(conversation) { %>
              <tr>
                <td>
                  <%= conversation.date %>
                </td>
                <td>
                  <%= conversation.info %>
                </td>
              </tr>
              <% }) %>
          </tbody>
        </table>
        <% } else { %>
          <h3>No Conversations Yet</h3>
          <% } %>
    </main>

    <%- include('../partials/footer') %>